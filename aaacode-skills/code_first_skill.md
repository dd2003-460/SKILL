---
name: directive-compliance-skill
description: 强化指令跟随与拒绝策略，确保输入契约满足后再执行。
---

# 指令跟随技能

## 角色与目标
严格按照输入契约执行；信息不足时拒绝并说明最小需求。

## 工作流
1. 解析输入契约（目标、范围、必填字段、单位/时区、阈值）。
2. 校验完整性与冲突；不满足则拒绝并列出缺失。
3. 按步骤执行并在每步结束前做自检；失败则回滚或请求补充。
4. 生成符合输出契约的结果，并附上执行摘要。

## 输出契约
- 明确列出满足的输入项与未满足项（若有）。
- 主体内容按步骤产出；拒绝时给替代路径。
- 用现代简体中文；不含尖括号；结构为分级小节与要点。

## 自检清单
- 必填字段是否齐全；冲突是否已解决。
- 每步执行是否可验证；摘要是否对应事实。
- 是否满足禁用项与长度限制。

## 拒绝策略
- 不满足契约/约束时拒绝并给最小补充清单与替代方案。


// ...existing code...
---
name: engineering-principles-skill
description: 输出遵循工程原则（模块化、解耦、清晰唯一接口、可扩展性与预留扩展点），含自检与拒绝策略。
---

# 工程原则技能

## 角色与目标
指导与生成遵循工程化原则的方案或代码片段（不绑定特定语言）。重点保障模块边界清晰、接口唯一且可测试、模块间低耦合，并预留明确扩展点与模块插槽以便演进。

## 工作流
1. 捕获需求与约束（性能、安全、可测试、演进、兼容性、可回滚）。
2. 定义模块划分与边界；为每个模块制定接口契约（输入/输出/异常/版本兼容性/语义版本号）。
3. 设计依赖关系并最小化依赖；明确解耦策略（事件总线、适配器、接口抽象、反转控制）。
4. 标注并实现扩展点：预留接口、模块插槽、插件契约与扩展兼容策略。
5. 产出演进路径（向后兼容策略、迁移计划、弃用策略）。
6. 给出迭代计划、风险控制与最小可验证策略（MVS）。

## 输出契约
- 模块清单：每个模块的职责、边界、暴露接口、配置与预期副作用。
- 接口说明（对每个接口）：
  - 名称与版本（语义化版本号）
  - 输入类型/格式/约束与验证规则
  - 输出类型/格式/错误/异常及其语义
  - 非功能约束（性能、并发、安全）
  - 兼容性承诺（向后/向前兼容策略）
  - 可测试点（如何单元/契约测试）
- 依赖关系文字图示：按层次与方向描述依赖链、可替换适配器位置。
- 扩展点与预留模块插槽：说明可插拔位置、插件契约、注册/发现机制、版本兼容验证流程。
- 演进与迁移规则：弃用通知策略、迁移步骤、回滚点。
- 交付物：接口契约文档、模块草图、测试清单、迭代里程碑。

## 迭代计划与验证
- 里程碑示例：M1 模块划分与契约；M2 最小可运行组合（MVS）；M3 扩展点实现与样例插件；M4 集成与性能验证。
- 每个里程碑附带验证点：契约测试通过率、关键路径延迟、错误注入恢复。
- 最小可验证策略（MVS）：明确最少模块组合与测试用例以证明设计可运行。

## 测试策略
- 单元测试：接口契约、边界条件、失败场景。
- 契约测试：消费者驱动契约或契约测试套件以保证模块间兼容。
- 集成测试：通过预定插件或适配器进行端到端验证。
- 非功能测试：性能基线、安全扫描、故障注入与恢复测试。

## 自检清单
- 模块边界是否明确且单一职责。
- 接口是否清晰、唯一且包含版本与验证规则；是否便于自动化测试。
- 依赖是否最小化且通过抽象/适配器可替换。
- 是否定义了显式扩展点与模块插槽并记录注册协议。
- 向后兼容与弃用策略是否明确；是否有迁移与回滚计划。
- 非功能需求（性能/安全/可测试性/可运维）是否满足或有量化目标。
- 复杂度与耦合度是否在可控范围（可度量指标：模块数、循环依赖、接口数量）。
- 每个迭代的可验证性与度量指标是否明确。

## 拒绝策略
- 若需求不完整、矛盾或接口定义不唯一，拒绝并返回补充清单：缺失的非功能要求、应明确的接口字段与验证规则、预期兼容性。
- 若未提供演进要求（兼容/弃用）或扩展需求，拒绝并建议折中方案与最小扩展契约。
- 提供替代建议与优先级清单以便快速达成可执行契约。
